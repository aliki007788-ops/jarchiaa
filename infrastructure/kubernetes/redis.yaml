apiVersion: apps/v1
kind: Deployment
metadata:
name: redis
namespace: jarchia
spec:
replicas: 1
selector:
matchLabels:
app: redis
template:
metadata:
labels:
app: redis
spec:
containers:
- name: redis
image: redis:7-alpine
args: ["redis-server", "--requirepass", "$(REDIS_PASSWORD)"]
env:
- name: REDIS_PASSWORD
valueFrom:
secretKeyRef:
name: jarchia-secrets
key: redis-password
ports:
- containerPort: 6379


